# ScreenShot тестирование страниц

### INSTALL
Установка пакетов `npm i`

### НАСТРАИВАЕМ
Настройте страницы для тестирования в json файле `requirement.json`
```json
{
  "baseURL": "http://localhost:3000",
  "testDir": "__tests__",
  "beforeDir": "/before/",
  "afterDir": "/after/",
  "diffDir": "/difference/",

  "pageWidths": [
    {
      "name": "Desktop FullHD",
      "width": 1920
    },
    {
      "name": "Desktop",
      "width": 1600
    },
    {
      "name": "iPad Pro",
      "width": 1024
    },
    {
      "name": "iPad",
      "width": 768
    },
    {
      "name": "iPhone 6/7/8 Plus",
      "width": 414
    },
    {
      "name": "iPhone X",
      "width": 375
    }
  ],
  "pageList": [
    {
      "name" : "index",
      "page": ""
    },
    {
      "name" : "demopage",
      "page": "onlyForDesktop",
      "pageWidth": 1600
    }
  ]
}
```

где:
* `baseURL` - адрес сайта для тестирования
* `testDir` - папка в которую будут сохраняться скриншоты
* `beforeDir` - папка внутри папки `testDir` в которую будут складываться скриншоты которые проверяются в данный момент
* `afterDir` - папка внутри папки `testDir` в которую складываются исходные скриншоты ()
* `diffDir` - папка внутри папки `testDir` в которую будут складываться различия в скриншотах если они существуют
* `pageWidths` - Массив с описанием ширины экранов которые будут тестироваться  
  * `name` - имя устройства, для пользователя
  * `width` - разрешение устройства
* `pageList` - Массив страниц для тестирования
  * `name` - имя с которым будут сохраняться скриншоты
  * `page` - путь к странице
  * `pageWidth` - тестируемая ширина страницы ***НЕОБЯЗАТЕЛЬНЫЙ ПАРАМЕТР (используется для страниц которые нужно проверять только для одного разрешения)


### ТЕСТИРУЕМ
Для первого запуска рекомендуется использовать команды
`npm start` или `npm test`

* `npm start` проведет тест по списку страниц из файла `requirement.json` сохранит скриншоты и откроет страницу с ошибками.
* `npm test` просто проведёт тест, и сохранит страницы.

***При первом открытии страницы ошибок не будет, т.к. система сохранит одну и туже станицу в исходные данные и в сравниваемые. После первого проведения теста измените что-то на страницах и проведите тест командой `npm start` заново, чтобы система сравнила старые и новые значения.


Существует также команда `npm test open` - она просто откроет страницу с ошибками.

### АКТУАЛИЗАЦИЯ СТАРЫХ СКРИНШОТОВ
На странице с ошибками есть возможность заменить старый исходный скриншот на новый, если верстка страницы поменяла актуальность. Для этого нажмите на ссылку _**"Заменить исходную страницу на текущую"**_

